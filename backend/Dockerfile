# с IMAGE python с тегом 3.9 (используем питоновский образ)
FROM python:3.9 

# создаем рабочую директорию внутри контейнера (это как cd для терминала ОС, влияет на то, как
# выполнятся нижеследующие команды в докерфайле)
WORKDIR /app

# копируем то, что у нас лежит в проекте в текущую директорию /app контейнера (потому что ".")
COPY requirements.txt .

# выполняем команду ВНУТРИ контейнера (не сохраняем кэш, устанавливаем перечисленные зависимости)
RUN pip install --no-cache-dir -r requirements.txt

# копируем все, что есть в локальных файлах в наш контейнер
# тут нужно подумать, почему бы нам сразу все не скопировать, а создавать два отдельных слоя COPY
COPY . .

# команда, которая выполняется при запуске контейнера (не путать с RUN,
# который нужен для выполнения команд в ПРОЦЕССЕ сборки)
# не забываем указывать хосты и порты, где будет запущен контейнер ;)
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8000"]